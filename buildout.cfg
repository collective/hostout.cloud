[buildout]
parts = test host1 instance
develop =
  .
  src/libcloud
  src/collective.hostout
  src/hostout.ubuntu

extends = 
#    http://download.zope.org/Zope2/index/2.12.1/versions.cfg
    http://dist.plone.org/release/3.3.1/versions.cfg
versions = versions
#find-links =
#    http://dist.plone.org/release/3.3.1
#    http://dist.plone.org/thirdparty
#    http://dist.repoze.org/


#extensions =
#  mr.developer
#sources = sources
#sources-dir = ${buildout:directory}/src
#auto-checkout =
#  libcloud
#  collective.hostout
#  hostout.ubuntu
    
[sources]
#libcloud = svn https://svn.apache.org/repos/asf/incubator/libcloud/trunk libcloud
libcloud = fs libcloud
collective.hostout  = git git@repos.pretaweb.com:collective.hostout
#hostout.ubuntu  = git git@repos.pretaweb.com:hostout.ubuntu
hostout.ubuntu  = fs hostout.ubuntu


[test]
recipe  = zc.recipe.testrunner
eggs =
	hostout.libcloud
#	functools
#	Fabric<0.1.0
#	zc.recipe.egg
#	paramiko
#	mr.developer
defaults = ['-m', 'hostout.cloud',
             '-v']
	     
[python2.6]
executable=/Library/Frameworks/Python.framework/Versions/2.6/bin/python2.6


[host1]
recipe = collective.hostout
python = python2.6
extends = hostout.libcloud hostout.ubuntu hostout.supervisor
hostname = gciostaging
hosttype = Rackspace
key = ${keys:rackspace_key}
secret = ${keys:rackspace_secret}
parts = instance

[instance]
recipe = plone.recipe.zope2instance
user = admin:admin
zope2-location = ${zope2:location}
http-address = 8080
#debug-mode = on
#verbose-security = on
blob-storage = var/blobstorage
eggs =
    Zope2
    Plone
    PIL


[zope2]
recipe = plone.recipe.zope2install
url = ${versions:zope2-url}
fake-zope-eggs = true
skip-fake-eggs =
    zope.filerepresentation
    zope.interface

[supervisor-app_1]
recipe=collective.recipe.supervisor
programs=
 10 instance1 ${buildout:directory}/bin/instance [console] ${instance:location} true


[PIL]
# Build egg with Chris McDonough's custom packaging of setuptools-compatibile PIL
# http://article.gmane.org/gmane.comp.web.zope.devel/13999
recipe = zc.recipe.egg
egg = PIL==1.1.6
find-links = http://dist.repoze.org/PIL-1.1.6.tar.gz
index = http://nowhere
include-dirs    = ${libjpeg:location}/include
library-dirs    = ${libjpeg:location}/lib
rpath = ${libjpeg:location}/lib

[libjpeg]
recipe = zc.recipe.cmmi
url = http://www.ijg.org/files/jpegsrc.v7.tar.gz
options = --enable-shared --enable-static
